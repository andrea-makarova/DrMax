<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Move &amp; Mind</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Figtree:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
  <script src="https://kit.fontawesome.com/2c7f1c6cae.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <style>
    :root {
      --blue-25: #f5f8fd;
      --blue-50: #e5f1fe;
      --blue-200: #95ccfe;
      --blue-400: #3997dd;
      --blue-500: #0d77ba;
      --gray-50: #f1f1f1;
      --gray-100: #e2e2e2;
      --gray-300: #ababab;
      --gray-400: #919191;
      --gray-900: #1b1b1b;
      --green-300: #78be20;
      --green-500: #47850a;
      --red-500: #e4002b;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0;
      min-height: 100vh;
      background: var(--blue-25);
      font-family: "Proxima Vara", "Proxima Nova", "Figtree", system-ui, -apple-system, sans-serif;
      color: var(--gray-900);
    }
    .font-sans {
      font-family: "Proxima Vara", "Proxima Nova", "Figtree", system-ui, -apple-system, sans-serif !important;
    }
    .page {
      max-width: 1080px;
      margin: 0 auto;
      padding: 40px 24px 60px;
    }
    .glass {
      background: rgba(255, 255, 255, 0.9);
      border: 1px solid rgba(255, 255, 255, 0.8);
      border-radius: 24px;
      box-shadow: 0 18px 40px rgba(15, 23, 42, 0.12);
      backdrop-filter: blur(10px);
    }
    .card { padding: 20px; }
    .section-title { font-size: 20px; font-weight: 700; margin: 0; color: var(--gray-900); }
    .muted { color: var(--gray-400); font-size: 14px; }
    .bar {
      height: 10px;
      border-radius: 999px;
      background: var(--blue-50);
      overflow: hidden;
    }
    .bar-fill {
      height: 100%;
      border-radius: inherit;
      background: linear-gradient(90deg, var(--green-300), var(--green-500));
    }
    .tag {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 6px 10px;
      border-radius: 999px;
      background: var(--blue-50);
      color: var(--gray-900);
      font-size: 12px;
      font-weight: 600;
      border: 1px solid var(--gray-100);
    }
    .card-header-safe { position: relative; }
    @media (max-width: 400px) {
      .card-tag {
        position: static !important;
        margin-top: 8px !important;
        align-self: flex-start !important;
      }
    }
    @keyframes breathe {
      0% { transform: scale(0.9); opacity: 0.7; }
      50% { transform: scale(1.05); opacity: 1; }
      100% { transform: scale(0.9); opacity: 0.7; }
    }
  </style>
</head>
<body>
  <main class="page">
    <section style="padding:20px 0 28px;margin-bottom:24px;">
      
      <div style="display:flex;flex-direction:column;align-items:flex-start;gap:12px;text-align:left;">
        <div style="width:120px;height:120px;position:relative;flex-shrink:0;">
          <svg xmlns="http://www.w3.org/2000/svg" width="88" height="88" viewBox="0 0 88 88" fill="none">
<path d="M44.9279 59.5715C44.8309 54.0181 46.8772 48.6548 50.6165 44.6615C54.3558 40.6682 59.4819 38.3719 64.867 38.2779C70.2521 38.1839 75.4551 40.2999 79.3315 44.1603C83.2079 48.0206 85.4401 53.3092 85.5371 58.8626C85.634 64.416 83.5877 69.7793 79.8484 73.7726C76.1091 77.7659 70.9831 80.0622 65.598 80.1562C60.2128 80.2502 55.0098 78.1342 51.1334 74.2739C47.257 70.4135 45.0248 65.1249 44.9279 59.5715ZM69.7466 47.9382C68.9181 47.3418 67.7906 47.3906 67.0124 48.0587L55.8945 57.5619C55.1578 58.1856 54.88 59.2378 55.2205 60.1627C55.5611 61.0877 56.418 61.6982 57.3768 61.6815L62.0159 61.6005L59.8815 67.805C59.546 68.7854 59.8896 69.8849 60.7184 70.4959C61.5471 71.1069 62.6744 71.0435 63.4526 70.3754L74.5705 60.8722C75.3071 60.2485 75.585 59.1964 75.2444 58.2714C74.9039 57.3464 74.0469 56.7359 73.0881 56.7527L68.4491 56.8336L70.5834 50.6291C70.9189 49.6487 70.5753 48.5492 69.7466 47.9382Z" fill="url(#paint0_linear_49145_52454)"/>
<path d="M37.5065 14.1882L39.6741 17.1613L41.7366 14.1144C45.1739 9.02162 50.7902 5.94176 56.8111 5.83666C67.1749 5.65576 75.7301 14.1755 75.9166 24.8632L75.9232 25.2413C75.9679 27.8005 75.5342 30.4263 74.72 33.0732C71.6242 31.8763 68.2562 31.2369 64.7452 31.2982C49.7987 31.5591 37.8906 44.2761 38.1597 59.6896C38.232 63.8338 39.175 67.7592 40.8162 71.2796C40.7457 71.2809 40.6893 71.2818 40.6188 71.2831C38.4332 71.3212 36.2642 70.69 34.5057 69.3389C24.0711 61.4192 4.01385 42.8165 3.72907 26.5014L3.72247 26.1234C3.53592 15.4357 11.7885 6.62254 22.1523 6.44164C28.1732 6.33654 33.8936 9.21852 37.5065 14.1882Z" fill="url(#paint1_linear_49145_52454)"/>
<defs>
<linearGradient id="paint0_linear_49145_52454" x1="44.9279" y1="59.5715" x2="85.5371" y2="58.8626" gradientUnits="userSpaceOnUse">
<stop stop-color="#E4002B"/>
<stop offset="1" stop-color="#FD5553"/>
</linearGradient>
<linearGradient id="paint1_linear_49145_52454" x1="39.4817" y1="6.13915" x2="40.6188" y2="71.2831" gradientUnits="userSpaceOnUse">
<stop stop-color="#95DA39"/>
<stop offset="1" stop-color="#5DA20A"/>
</linearGradient>
</defs>
</svg>
        </div>
        <div>
          <p style="margin:0;font-size:32px;font-weight:800;line-height:40px;color:#333;">Welcome back. Keep on moving.</p>
        </div>
      </div>
    </section>

    <section class="mb-12">
      <h2 class="section-title" style="font-size:20px;margin-bottom:16px;">Your Rewards</h2>
      <div class="rewards-carousel" style="overflow-x:auto; overflow-y:visible; display:flex; gap:12px; padding:0 2px 12px; scroll-snap-type:x mandatory;">
        <div class="reward-card font-sans" data-reward-type="code" data-reward-code="MOVE10" style="flex:0 0 240px; background: linear-gradient(180deg, #8ed63a 0%, #5ca80a 100%); border-radius: 24px; padding: 22px 18px; color: #ffffff; box-shadow: none; scroll-snap-align:start; margin-bottom:10px;">
          <div style="display:flex;align-items:center;justify-content:center;margin-bottom:16px;">
            <div style="width:64px;height:64px;border-radius:50%;background:#ffffff;display:flex;align-items:center;justify-content:center;">
              <i class="fa-solid fa-person-walking reward-main-icon" style="font-size:28px;color:#2f6f0a;background:linear-gradient(135deg,#95DA39 0%,#2f6f0a 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;"></i>
            </div>
          </div>
          <div style="text-align:center; margin-bottom:18px;">
            <p class="reward-title" style="margin:0 0 2px 0; font-size:18px; font-weight:700; line-height:22px;">Daily Steps Challenge</p>
            <p class="reward-description" style="margin:0; font-size:14px; font-weight:600; line-height:18px;">10% off Vitamins</p>
          </div>
          <div style="display:flex;justify-content:center;">
            <button style="background:#ffffff;color:#0d6fb8;border:none;border-radius:999px;padding:10px 22px;font-size:16px;font-weight:700;cursor:pointer;min-width:170px;text-align:center;">Redeem Reward</button>
          </div>
        </div>
        <div class="reward-card font-sans" data-reward-type="product" data-product-name="Distance Boost Pack" style="flex:0 0 240px; background: linear-gradient(180deg, #8ed63a 0%, #5ca80a 100%); border-radius: 24px; padding: 22px 18px; color: #ffffff; box-shadow: none; scroll-snap-align:start; margin-bottom:10px;">
          <div style="display:flex;align-items:center;justify-content:center;margin-bottom:16px;">
            <div style="width:64px;height:64px;border-radius:50%;background:#ffffff;display:flex;align-items:center;justify-content:center;">
              <i class="fa-solid fa-location-dot reward-main-icon" style="font-size:28px;color:#2f6f0a;background:linear-gradient(135deg,#95DA39 0%,#2f6f0a 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;"></i>
            </div>
          </div>
          <div style="text-align:center; margin-bottom:18px;">
            <p class="reward-title" style="margin:0 0 2px 0; font-size:18px; font-weight:700; line-height:22px;">Weekly Distance</p>
            <p class="reward-description" style="margin:0; font-size:14px; font-weight:600; line-height:18px;">Distance Boost Pack</p>
          </div>
          <div style="display:flex;justify-content:center;">
            <button style="background:#ffffff;color:#0d6fb8;border:none;border-radius:999px;padding:10px 22px;font-size:16px;font-weight:700;cursor:pointer;min-width:170px;text-align:center;">Redeem Reward</button>
          </div>
        </div>
        <div class="reward-card font-sans" data-reward-type="product" data-product-name="Mindful Tea Sachet" style="flex:0 0 240px; background: linear-gradient(180deg, #8ed63a 0%, #5ca80a 100%); border-radius: 24px; padding: 22px 18px; color: #ffffff; box-shadow: none; scroll-snap-align:start; margin-bottom:10px;">
          <div style="display:flex;align-items:center;justify-content:center;margin-bottom:16px;">
            <div style="width:64px;height:64px;border-radius:50%;background:#ffffff;display:flex;align-items:center;justify-content:center;">
              <i class="fa-solid fa-leaf reward-main-icon" style="font-size:28px;color:#2f6f0a;background:linear-gradient(135deg,#95DA39 0%,#2f6f0a 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;"></i>
            </div>
          </div>
          <div style="text-align:center; margin-bottom:18px;">
            <p class="reward-title" style="margin:0 0 2px 0; font-size:18px; font-weight:700; line-height:22px;">Mindful Reset</p>
            <p class="reward-description" style="margin:0; font-size:14px; font-weight:600; line-height:18px;">Mindful Tea Sachet</p>
          </div>
          <div style="display:flex;justify-content:center;">
            <button style="background:#ffffff;color:#0d6fb8;border:none;border-radius:999px;padding:10px 22px;font-size:16px;font-weight:700;cursor:pointer;min-width:170px;text-align:center;">Redeem Reward</button>
          </div>
        </div>

        <!-- Claimed rewards in same row -->
        <div class="reward-card font-sans" style="flex:0 0 240px; background:#ffffff; border:1px solid #e5e5ea; border-radius: 24px; padding: 22px 18px; color: #3a3a3c; box-shadow: none; scroll-snap-align:start; margin-bottom:10px; position:relative;">
          <div style="display:flex;align-items:center;justify-content:center;margin-bottom:16px;">
            <div style="width:64px;height:64px;border-radius:50%;background:linear-gradient(180deg, #95DA39 0%, #5DA20A 100%);display:flex;align-items:center;justify-content:center;">
              <i class="fa-solid fa-gift" style="font-size:22px;color:#ffffff;"></i>
            </div>
          </div>
          <div style="text-align:center; margin-bottom:18px;">
            <p style="margin:0 0 2px 0; font-size:18px; font-weight:700; line-height:22px;">10% off Vitamins</p>
            <p style="margin:0; font-size:14px; font-weight:600; line-height:18px; color:#6e6e73;">Daily Steps Challenge</p>
          </div>
          <div style="display:flex;justify-content:center;">
            <span class="claim-code-pill" style="display:inline-flex;align-items:center;gap:10px; background:#ffffff; color:#0d6fb8; border:1px solid #e5e5ea; border-radius:999px; padding:10px 18px; font-size:14px; font-weight:700;min-width:170px;justify-content:center;">
              <span style="letter-spacing:0.6px;">MOVE10</span>
              <button class="copy-code" data-code="MOVE10" aria-label="Copy code" style="background:transparent;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#0d6fb8;">
                <i class="fa-solid fa-copy" style="font-size:14px;"></i>
              </button>
            </span>
          </div>
        </div>

        <div class="reward-card font-sans" style="flex:0 0 240px; background:#ffffff; border:1px solid #e5e5ea; border-radius: 24px; padding: 22px 18px; color: #3a3a3c; box-shadow: none; scroll-snap-align:start; margin-bottom:10px; position:relative;">
          <div style="display:flex;align-items:center;justify-content:center;margin-bottom:16px;">
            <div style="width:64px;height:64px;border-radius:50%;background:linear-gradient(180deg, #95DA39 0%, #5DA20A 100%);display:flex;align-items:center;justify-content:center;">
              <i class="fa-solid fa-mug-hot" style="font-size:22px;color:#ffffff;"></i>
            </div>
          </div>
          <div style="text-align:center; margin-bottom:18px;">
            <p style="margin:0 0 2px 0; font-size:18px; font-weight:700; line-height:22px;">Herbal Tea Sachet</p>
            <p style="margin:0; font-size:14px; font-weight:600; line-height:18px; color:#6e6e73;">Mindful Reset</p>
          </div>
          <div style="display:flex;justify-content:center;">
            <button class="add-to-cart-btn" style="background:#ffffff;color:#0d6fb8;border:1px solid #e5e5ea;border-radius:999px;padding:10px 18px;font-size:14px;font-weight:700;cursor:pointer;min-width:170px;text-align:center;display:inline-flex;align-items:center;gap:8px;justify-content:center;">
              <i class="fa-solid fa-cart-plus" style="color:#0d6fb8;font-size:14px;"></i>
              Add to cart
            </button>
          </div>
        </div>

        <div class="reward-card font-sans" style="flex:0 0 240px; background:#ffffff; border:1px solid #e5e5ea; border-radius: 24px; padding: 22px 18px; color: #3a3a3c; box-shadow: none; scroll-snap-align:start; margin-bottom:10px; position:relative;">
          <div style="display:flex;align-items:center;justify-content:center;margin-bottom:16px;">
            <div style="width:64px;height:64px;border-radius:50%;background:linear-gradient(180deg, #cccccc 0%, #a5a5a5 100%);display:flex;align-items:center;justify-content:center;">
              <i class="fa-solid fa-shoe-prints" style="font-size:22px;color:#ffffff;"></i>
            </div>
          </div>
          <div style="text-align:center; margin-bottom:18px;">
            <p style="margin:0 0 2px 0; font-size:18px; font-weight:700; line-height:22px;">Free Express Delivery</p>
            <p style="margin:0; font-size:14px; font-weight:600; line-height:18px; color:#6e6e73;">Weekly Distance</p>
          </div>
          <div style="display:flex;justify-content:center;">
            <span style="display:inline-flex;align-items:center;gap:8px; background:#f6f6f7; color:#919191; border:1px solid #e5e5ea; border-radius:999px; padding:10px 16px; font-size:14px; font-weight:700;min-width:170px;justify-content:center;">
              <i class="fa-solid fa-circle-check" style="color:#919191;font-size:14px;"></i>
              Used
            </span>
          </div>
        </div>
      </div>

    </section>

    <section class="mb-16">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;">
        <h2 class="section-title" style="font-size:20px;">Challenges</h2>
        <a href="#" class="muted" style="text-decoration:none;">View all</a>
      </div>
        <!-- Card 2: 14-Day 7k Steps -->
        <article class="bg-white rounded-[32px] shadow-sm relative overflow-hidden border border-[#e5e5ea] mb-6">
          <div class="flex flex-col gap-1 pl-6 pr-6 pt-6 pb-3 relative card-header-safe">
            <p class="font-sans text-[13px] font-normal leading-[17px] text-[#8a8a93] uppercase tracking-[0.5px] mb-2">Big Challenge</p>
            <p class="font-sans text-[22px] font-semibold leading-[28px] text-[#3a3a3c]">14-Day 7k Steps</p>
            <p class="font-sans text-[14px] font-normal leading-[18px] text-[#8a8a93]">
              Hit at least 7,000 steps every day for 2 weeks to unlock a reward.
            </p>
            <span class="tag card-tag" style="position:absolute; top:16px; right:16px; border:0; padding:6px 10px; display:inline-flex; align-items:center; gap:6px; background:#e8f6db; color:#2f6f0a;">
              <i class="fa-solid fa-gift" style="color:#2f6f0a;font-size:13px;"></i>
              10% off daily vitamins
            </span>
          </div>
          <div class="relative h-[230px] overflow-hidden">
            <svg class="absolute top-[24px] h-[186px] w-[380px]" viewBox="0 0 380 210" preserveAspectRatio="xMaxYMid meet" fill="none" data-progress="78" style="overflow: visible; width:380px; right:0;">
              <defs>
                <linearGradient id="arcGreen" x1="51.5829" y1="-22.8751" x2="331.322" y2="-17.3927" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#95DA39" />
                  <stop offset="1" stop-color="#5DA20A" />
                </linearGradient>
                <linearGradient id="arcRed" x1="0" y1="22.5" x2="45" y2="22.5" gradientUnits="userSpaceOnUse">
                  <stop stop-color="#E4002B" />
                  <stop offset="1" stop-color="#FD5553" />
                </linearGradient>
              </defs>
              <path d="M380 198H105C53.6375 198 12 156.362 12 105C12 53.6375 53.6375 12 105 12H380" stroke="#F2F2F7" stroke-width="20" />
              <path class="arc-progress" d="M380 198H105C53.6375 198 12 156.362 12 105C12 53.6375 53.6375 12 105 12H380" stroke="url(#arcGreen)" stroke-linecap="butt" stroke-width="20" pathLength="100" stroke-dasharray="0 100" />
              <circle class="arc-knob" r="20" fill="#E4002B" opacity="1" stroke="white" stroke-width="5" style="filter: drop-shadow(0 4px 12px rgba(0,0,0,0.18));"></circle>
              <text x="340" y="12" text-anchor="middle" dominant-baseline="middle" class="font-sans text-[12px]" fill="#6e6e73">14</text>
              <text x="340" y="198" text-anchor="middle" dominant-baseline="middle" class="font-sans text-[12px]" fill="#ffffff" stroke="rgba(0,0,0,0.25)" stroke-width="0.4" paint-order="stroke">0</text>
            </svg>
            <div class="absolute top-[24px] h-[186px] w-[380px] flex items-center justify-center pointer-events-none" style="right:0;">
              <div class="text-center">
                <p class="font-sans text-[24px] font-semibold leading-[28px] text-[#3a3a3c] m-0">11 / 14 days</p>
                <p class="font-sans text-[13px] font-normal leading-[18px] text-[#8a8a93] m-0">days at 7k+ steps</p>
              </div>
            </div>
          </div>
        </article>

        <!-- Card 3: Mindful Reset -->
        <article class="bg-white rounded-[32px] shadow-sm relative overflow-hidden border border-[#e5e5ea] mb-6">
          <div class="flex flex-col gap-1 pl-6 pr-6 pt-6 pb-3 relative card-header-safe">
            <p class="font-sans text-[13px] font-normal leading-[17px] text-[#8a8a93] uppercase tracking-[0.5px] mb-2">Mindfulness</p>
            <p class="font-sans text-[22px] font-semibold leading-[28px] text-[#3a3a3c]">Mindful Reset</p>
            <p class="font-sans text-[14px] font-normal leading-[18px] text-[#8a8a93]">
              Take a focused 5 minutes to reset.
            </p>
            <div style="padding:8px 0 4px;">
              <a href="/breathing-coach" style="display:inline-flex;align-items:center;gap:6px; background:transparent; color:#2f6f0a; border:none; padding:0; font-size:13px; font-weight:600; text-decoration:none;">
                Open Breathing Coach
                <i class="fa-solid fa-arrow-right" style="font-size:12px;color:#2f6f0a;"></i>
              </a>
            </div>
            <span class="tag card-tag" style="position:absolute; top:16px; right:16px; border:0; padding:6px 10px; display:inline-flex; align-items:center; gap:6px; background:#e8f6db; color:#2f6f0a;">
              <i class="fa-solid fa-mug-hot" style="color:#2f6f0a;font-size:13px;"></i>
              Free herbal tea sachet
            </span>
          </div>
          <div style="padding:20px 24px 24px;">
            <div class="mobility-progress" data-progress="60" style="position:relative;height:20px;border-radius:999px;background:#f2f2f7;overflow:visible;">
              <div class="mobility-progress-fill" style="height:100%;width:0%;background:linear-gradient(90deg, #95DA39 0%, #5DA20A 100%);border-radius:999px;"></div>
              <div class="mobility-progress-dot" style="position:absolute;left:0%;top:50%;transform:translate(-50%,-50%);width:40px;height:40px;border-radius:50%;background:#E4002B;border:4px solid #ffffff;box-shadow:0 4px 12px rgba(0,0,0,0.18);"></div>
              <span class="font-sans" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);font-size:12px;color:#ffffff;">0</span>
              <span class="font-sans" style="position:absolute;right:8px;top:50%;transform:translateY(-50%);font-size:12px;color:#6e6e73;">5</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px;font-size:13px;color:#6e6e73;">
              <span class="font-sans">3 / 5 mins</span>
              <span class="font-sans font-semibold text-[#3a3a3c]">60%</span>
            </div>
          </div>
        </article>

        <!-- Card 4: Weekly Distance -->
        <article class="bg-white rounded-[32px] shadow-sm relative overflow-hidden border border-[#e5e5ea] mb-6">
          <div class="flex flex-col gap-1 pl-6 pr-6 pt-6 pb-3 relative card-header-safe">
            <p class="font-sans text-[13px] font-normal leading-[17px] text-[#8a8a93] uppercase tracking-[0.5px] mb-2">Weekly Distance</p>
            <p class="font-sans text-[22px] font-semibold leading-[28px] text-[#3a3a3c]">Finish by Sunday</p>
            <p class="font-sans text-[14px] font-normal leading-[18px] text-[#8a8a93]">
              Stay on pace to hit your weekly target before the weekend ends.
            </p>
            <span class="tag card-tag" style="position:absolute; top:16px; right:16px; border:0; padding:6px 10px; display:inline-flex; align-items:center; gap:6px; background:#e8f6db; color:#2f6f0a;">
              <i class="fa-solid fa-truck-fast" style="color:#2f6f0a;font-size:13px;"></i>
              Free express delivery
            </span>
          </div>
          <div style="padding:20px 24px 24px;">
            <div class="mobility-progress" data-progress="80" style="position:relative;height:20px;border-radius:999px;background:#f2f2f7;overflow:visible;">
              <div class="mobility-progress-fill" style="height:100%;width:0%;background:linear-gradient(90deg, #95DA39 0%, #5DA20A 100%);border-radius:999px;"></div>
              <div class="mobility-progress-dot" style="position:absolute;left:0%;top:50%;transform:translate(-50%,-50%);width:40px;height:40px;border-radius:50%;background:#E4002B;border:4px solid #ffffff;box-shadow:0 4px 12px rgba(0,0,0,0.18);"></div>
              <span class="font-sans" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);font-size:12px;color:#ffffff;">0</span>
              <span class="font-sans" style="position:absolute;right:8px;top:50%;transform:translateY(-50%);font-size:12px;color:#6e6e73;">30</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px;font-size:13px;color:#6e6e73;">
              <span class="font-sans">24 / 30 km</span>
              <span class="font-sans font-semibold text-[#3a3a3c]">80%</span>
            </div>
          </div>
        </article>

        <!-- Card 5: Mobility Minutes -->
        <article class="bg-white rounded-[32px] shadow-sm relative overflow-hidden border border-[#e5e5ea] mb-6">
          <div class="flex flex-col gap-1 pl-6 pr-6 pt-6 pb-3 relative card-header-safe">
            <p class="font-sans text-[13px] font-normal leading-[17px] text-[#8a8a93] uppercase tracking-[0.5px] mb-2">Mobility</p>
            <p class="font-sans text-[22px] font-semibold leading-[28px] text-[#3a3a3c]">20-Min Mobility</p>
            <p class="font-sans text-[14px] font-normal leading-[18px] text-[#8a8a93]">
              Complete 20 minutes of stretching and light mobility today.
            </p>
            <span class="tag card-tag" style="position:absolute; top:16px; right:16px; border:0; padding:6px 10px; display:inline-flex; align-items:center; gap:6px; background:#e8f6db; color:#2f6f0a;">
              <i class="fa-solid fa-gift" style="color:#2f6f0a;font-size:13px;"></i>
              Free foam roller
            </span>
          </div>
            <div style="padding:20px 24px 24px;">
              <div class="mobility-progress" data-progress="65" style="position:relative;height:20px;border-radius:999px;background:#f2f2f7;overflow:visible;">
                <div class="mobility-progress-fill" style="height:100%;width:0%;background:linear-gradient(90deg, #95DA39 0%, #5DA20A 100%);border-radius:999px;"></div>
                <div class="mobility-progress-dot" style="position:absolute;left:0%;top:50%;transform:translate(-50%,-50%);width:40px;height:40px;border-radius:50%;background:#E4002B;border:4px solid #ffffff;box-shadow:0 4px 12px rgba(0,0,0,0.18);"></div>
                <span class="font-sans" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);font-size:12px;color:#ffffff;">0</span>
                <span class="font-sans" style="position:absolute;right:8px;top:50%;transform:translateY(-50%);font-size:12px;color:#6e6e73;">20</span>
              </div>
              <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px;font-size:13px;color:#6e6e73;">
                <span class="font-sans">13 / 20 mins</span>
                <span class="font-sans font-semibold text-[#3a3a3c]">65%</span>
              </div>
            </div>
          </div>
        </article>

        <!-- Card 6: Not Joined Yet -->
        <article class="bg-white rounded-[32px] shadow-sm relative overflow-hidden border border-[#e5e5ea] mb-6">
          <div class="flex flex-col gap-1 pl-6 pr-6 pt-6 pb-3 relative">
            <p class="font-sans text-[13px] font-normal leading-[17px] text-[#8a8a93] uppercase tracking-[0.5px] mb-2">New Challenge</p>
            <p class="font-sans text-[22px] font-semibold leading-[28px] text-[#3a3a3c]">Evening Calm</p>
            <p class="font-sans text-[14px] font-normal leading-[18px] text-[#8a8a93]">
              Log 15 minutes of calm activity each night for 5 days.
            </p>
            <span class="tag" style="position:absolute; top:16px; right:16px; border:0; padding:6px 10px; display:inline-flex; align-items:center; gap:6px; background:#e8f6db; color:#2f6f0a; white-space:nowrap;">
              <i class="fa-solid fa-gift" style="color:#2f6f0a;font-size:13px;"></i>
              Scented candle
            </span>
          </div>
          <div style="padding:20px 24px 24px; position:relative;">
              <div class="mobility-progress" style="position:relative;height:20px;border-radius:999px;background:#f2f2f7;">
              <div class="mobility-progress-fill" style="height:100%;width:0%;background:linear-gradient(90deg, #95DA39 0%, #5DA20A 100%);border-radius:999px;"></div>
              <div class="mobility-progress-dot" style="position:absolute;left:4%;top:50%;transform:translate(-50%,-50%);width:40px;height:40px;border-radius:50%;background:#E4002B;border:4px solid #ffffff;box-shadow:0 4px 12px rgba(0,0,0,0.18);z-index:1;"></div>
              <span class="font-sans" style="position:absolute;left:8px;top:50%;transform:translateY(-50%);font-size:12px;color:#6e6e73;z-index:0;">0</span>
              <span class="font-sans" style="position:absolute;right:8px;top:50%;transform:translateY(-50%);font-size:12px;color:#6e6e73;">15</span>
            </div>
            <div style="display:flex;justify-content:space-between;align-items:center;margin-top:10px;font-size:13px;color:#6e6e73;">
              <span class="font-sans">0 / 15 min</span>
              <span class="font-sans font-semibold" style="color:#3a3a3c;">0%</span>
            </div>
          </div>
          <div class="join-overlay" style="position:absolute;left:0;right:0;bottom:0;top:55%;display:flex;align-items:center;justify-content:flex-start;gap:12px;background:rgba(255,255,255,0.35);backdrop-filter:blur(4px);padding:12px 24px 24px;transition:opacity 0.35s ease;z-index:3;pointer-events:none;">
            <button class="join-overlay-btn" style="background:#47850a;color:#ffffff;border:1px solid #47850a;border-radius:999px;padding:12px 20px;font-size:15px;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:8px;box-shadow:0 8px 18px rgba(53,107,9,0.25);pointer-events:auto;">
              <i class="fa-solid fa-plus" style="font-size:14px;color:#ffffff;"></i>
              Join challenge
            </button>
          </div>
        </article>
      </div>
    </section>

    

    <section style="display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));margin-top:32px;">
      <h2 class="section-title" style="font-size:20px;margin:0;grid-column:1/-1;">Breathing Coach</h2>
      <article class="glass card" style="position:relative;overflow:hidden;">
        <div style="display:flex;gap:16px;flex-wrap:wrap;align-items:center;justify-content:center;text-align:center;">
          <div style="width:160px;height:160px;border-radius:50%;background:var(--blue-25);display:flex;align-items:center;justify-content:center;">
            <div id="breathing-bubble" style="width:130px;height:130px;border-radius:50%;background:#fff;display:flex;align-items:center;justify-content:center;box-shadow:0 10px 30px rgba(15,23,42,0.12);transform:scale(0.9);">
              <div style="display:flex;flex-direction:column;align-items:center;gap:6px;">
                <span id="breathing-label" style="font-size:14px;color:var(--gray-400);">Tap start</span>
                <span id="breathing-counter" style="font-size:16px;font-weight:700;color:var(--gray-400);">4</span>
              </div>
            </div>
          </div>
          <div style="flex:1;min-width:220px;">
            <p class="muted" style="margin:0 0 8px 0;">Follow the animation to breathe in, hold, and out.</p>
            <div id="breath-controls" style="display:flex;gap:10px;align-items:center;margin-top:8px;justify-content:center;flex-wrap:wrap;"></div>
          </div>
        </div>
      </article>
    </section>
  </main>

  <script>
    // Animate arc progress when the card scrolls into view
    const easeOutCubic = (t) => 1 - Math.pow(1 - t, 3);

    const animateArc = (svg) => {
      const target = Math.max(0, Math.min(100, parseFloat(svg.dataset.progress || '0')));
      const path = svg.querySelector('.arc-progress');
      const knob = svg.querySelector('.arc-knob');
      if (!path || !knob || svg.dataset.animated === 'true') return;

      const totalLen = path.getTotalLength();
      const duration = 2200;
      const start = performance.now();

      const step = (now) => {
        const t = Math.min(1, (now - start) / duration);
        const eased = easeOutCubic(t);
        const current = target * eased;

        path.setAttribute('stroke-dasharray', `${current} ${100 - current}`);
        const point = path.getPointAtLength((current / 100) * totalLen);
        knob.setAttribute('cx', point.x);
        knob.setAttribute('cy', point.y);

        if (t < 1) {
          requestAnimationFrame(step);
        } else {
          svg.dataset.animated = 'true';
        }
      };

      // Init at zero and start
      path.setAttribute('stroke-dasharray', `0 100`);
      const startPoint = path.getPointAtLength(0);
      knob.setAttribute('cx', startPoint.x);
      knob.setAttribute('cy', startPoint.y);
      requestAnimationFrame(step);
    };

    const observer = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            animateArc(entry.target);
            observer.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.25, rootMargin: '0px 0px -10% 0px' }
    );

    document.querySelectorAll('svg[data-progress]').forEach((svg) => {
      const path = svg.querySelector('.arc-progress');
      const knob = svg.querySelector('.arc-knob');
      if (path && knob) {
        // Reset to zero until animated
        path.setAttribute('stroke-dasharray', `0 100`);
        const startPoint = path.getPointAtLength(0);
        knob.setAttribute('cx', startPoint.x);
        knob.setAttribute('cy', startPoint.y);
        observer.observe(svg);
      }
    });

    // Animate straight mobility progress
    const animateStraight = (track) => {
      const target = Math.max(0, Math.min(100, parseFloat(track.dataset.progress || '0')));
      const fill = track.querySelector('.mobility-progress-fill');
      const dot = track.querySelector('.mobility-progress-dot');
      if (!fill || !dot || track.dataset.animated === 'true') return;

      const duration = 1800;
      const start = performance.now();

      const step = (now) => {
        const t = Math.min(1, (now - start) / duration);
        const eased = easeOutCubic(t);
        const current = target * eased;

        fill.style.width = `${current}%`;
        dot.style.left = `${current}%`;

        if (t < 1) {
          requestAnimationFrame(step);
        } else {
          track.dataset.animated = 'true';
        }
      };

      fill.style.width = '0%';
      dot.style.left = '0%';
      requestAnimationFrame(step);
    };

    const straightObserver = new IntersectionObserver(
      (entries) => {
        entries.forEach((entry) => {
          if (entry.isIntersecting) {
            animateStraight(entry.target);
            straightObserver.unobserve(entry.target);
          }
        });
      },
      { threshold: 0.3, rootMargin: '0px 0px -10% 0px' }
    );

    document.querySelectorAll('.mobility-progress[data-progress]').forEach((track) => {
      const fill = track.querySelector('.mobility-progress-fill');
      const dot = track.querySelector('.mobility-progress-dot');
      if (fill && dot) {
        fill.style.width = '0%';
        dot.style.left = '0%';
        straightObserver.observe(track);
      }
    });

    const wireRewardActions = (root = document) => {
      root.querySelectorAll('.copy-code').forEach((copyBtn) => {
        if (copyBtn.dataset.wired === 'true') return;
        copyBtn.dataset.wired = 'true';
        copyBtn.addEventListener('click', (evt) => {
          evt.stopPropagation();
          const code = copyBtn.dataset.code || '';
          if (!code) return;
          navigator.clipboard?.writeText(code).catch(() => {});
          copyBtn.innerHTML = '<i class="fa-solid fa-check" style="font-size:14px;color:#0d6fb8;"></i>';
          setTimeout(() => {
            copyBtn.innerHTML = '<i class="fa-solid fa-copy" style="font-size:14px;"></i>';
          }, 1200);
        });
      });

      root.querySelectorAll('.add-to-cart-btn').forEach((addBtn) => {
        if (addBtn.dataset.wired === 'true') return;
        addBtn.dataset.wired = 'true';
        addBtn.addEventListener('click', (evt) => {
          evt.stopPropagation();
          addBtn.disabled = true;
          addBtn.innerHTML = '<i class="fa-solid fa-check" style="color:#0d6fb8;font-size:14px;"></i> Added to cart';
        });
      });
    };

    wireRewardActions();

    // Convert a reward card to claimed state when its button is clicked
    document.querySelectorAll('.reward-card button').forEach((btn) => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const card = btn.closest('.reward-card');
        if (!card || card.dataset.claimed === 'true') return;

        card.dataset.claimed = 'true';
        card.style.background = '#ffffff';
        card.style.border = '1px solid #e5e5ea';
        card.style.color = '#3a3a3c';
        card.style.transition = 'all 0.35s ease';
        card.animate(
          [
            { transform: 'scale(1)', boxShadow: card.style.boxShadow || 'none' },
            { transform: 'scale(1.03)', boxShadow: '0 8px 20px rgba(0,0,0,0.08)' },
            { transform: 'scale(1)', boxShadow: '0 6px 14px rgba(0,0,0,0.06)' }
          ],
          { duration: 320, easing: 'ease-out' }
        );

        const actions = btn.parentElement;
        if (actions) {
          const type = card.dataset.rewardType || 'code';
          if (type === 'product') {
            const productName = card.dataset.productName || 'Reward';
            actions.innerHTML = `
              <button class="add-to-cart-btn" style="background:#ffffff;color:#0d6fb8;border:1px solid #e5e5ea;border-radius:999px;padding:10px 18px;font-size:14px;font-weight:700;cursor:pointer;min-width:170px;text-align:center;display:inline-flex;align-items:center;gap:8px;justify-content:center;">
                <i class="fa-solid fa-cart-plus" style="color:#0d6fb8;font-size:14px;"></i>
                Add to cart
              </button>
            `;
          } else {
            const code = card.dataset.rewardCode || 'THANKS10';
            actions.innerHTML = `
              <span class="claim-code-pill" style="display:inline-flex;align-items:center;gap:10px; background:#ffffff; color:#0d6fb8; border:1px solid #e5e5ea; border-radius:999px; padding:10px 18px; font-size:14px; font-weight:700;min-width:170px;justify-content:center;">
                <span style="letter-spacing:0.6px;">${code}</span>
                <button class="copy-code" data-code="${code}" aria-label="Copy code" style="background:transparent;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#0d6fb8;">
                  <i class="fa-solid fa-copy" style="font-size:14px;"></i>
                </button>
              </span>
            `;
          }

          const pill = actions.querySelector('span,button');
          if (pill) {
            pill.style.opacity = '0';
            pill.style.transition = 'opacity 0.35s ease';
            requestAnimationFrame(() => {
              pill.style.opacity = '1';
            });
          }

          wireRewardActions(actions);
        }

        const icon = card.querySelector('.reward-main-icon');
        if (icon) {
          // keep same icon but invert styling: green gradient background, white icon
          icon.style.background = 'none';
          icon.style.webkitTextFillColor = '#ffffff';
          icon.style.color = '#ffffff';
          icon.style.fontSize = '26px';
          const iconWrap = icon.parentElement;
        if (iconWrap) iconWrap.style.background = 'linear-gradient(180deg, #95DA39 0%, #5DA20A 100%)';
        }
      });
    });

    // Breathing coach start handler with 4-4-4-4 timing and matching bubble scales
    const breathPhases = [
      { label: 'Inhale', duration: 4000, scale: 1.1, transition: 4000 },
      { label: 'Hold', duration: 4000, scale: 1.1, transition: 0 },
      { label: 'Exhale', duration: 4000, scale: 0.9, transition: 4000 },
      { label: 'Hold', duration: 4000, scale: 0.9, transition: 0 }
    ];
    let breathTimeout;
    let breathSessionInterval;
    let totalDuration = 60000; // default 1 min
    let selectedDuration = 1;
    let isQuickMode = false;
    const breathBtn = document.getElementById('breathing-start');
    const breathBubble = document.getElementById('breathing-bubble');
    const breathLabel = document.getElementById('breathing-label');
    const breathStatus = document.getElementById('breathing-status');
    const breathCounter = document.getElementById('breathing-counter');

    const setBubbleScale = (scale, ms) => {
      if (!breathBubble) return;
      breathBubble.style.transition = `transform ${ms}ms ease-in-out`;
      breathBubble.style.transform = `scale(${scale})`;
    };

    const renderRestControls = () => {
      const controls = document.getElementById('breath-controls');
      if (!controls) return;
      controls.innerHTML = `
        <div style="display:flex;gap:8px;flex-wrap:wrap;justify-content:center;">
          <button class="breath-duration" data-duration="1" style="background:#ffffff;color:#1d73c5;border:1px solid #d7dce5;border-radius:999px;padding:10px 18px;font-size:14px;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:8px;box-shadow:0 1px 3px rgba(0,0,0,0.08);">1 min</button>
          <button class="breath-duration" data-duration="5" style="background:#ffffff;color:#1d73c5;border:1px solid #d7dce5;border-radius:999px;padding:10px 18px;font-size:14px;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:8px;box-shadow:0 1px 3px rgba(0,0,0,0.08);">5 min</button>
          <button class="breath-duration" data-duration="10" style="background:#ffffff;color:#1d73c5;border:1px solid #d7dce5;border-radius:999px;padding:10px 18px;font-size:14px;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:8px;box-shadow:0 1px 3px rgba(0,0,0,0.08);">10 min</button>
        </div>
        <div style="display:flex;justify-content:center;margin-top:8px;gap:8px;flex-wrap:wrap;">
          <button id="breathing-quick" style="background:#1d73c5;color:#ffffff;border:1px solid #1d73c5;border-radius:999px;padding:10px 18px;font-size:14px;font-weight:700;cursor:pointer;display:inline-flex;align-items:center;gap:8px;box-shadow:0 1px 3px rgba(0,0,0,0.08);">
            <i class="fa-solid fa-bolt" style="font-size:13px;color:#ffffff;"></i>
            Quick start
          </button>
        </div>
      `;
      const durationBtns = Array.from(controls.querySelectorAll('.breath-duration'));
      const highlight = (activeBtn) => {
        durationBtns.forEach((b) => {
          const isActive = b === activeBtn;
          b.style.background = isActive ? '#1d73c5' : '#ffffff';
          b.style.color = isActive ? '#ffffff' : '#1d73c5';
          b.style.borderColor = isActive ? '#1d73c5' : '#d7dce5';
          const icon = b.querySelector('i');
          if (icon) icon.style.color = b.style.color;
        });
      };
      durationBtns.forEach((btn) => {
        btn.addEventListener('click', () => {
          const mins = parseInt(btn.dataset.duration || '1', 10);
          selectedDuration = Math.max(1, mins);
          highlight(btn);
        });
      });
      highlight(durationBtns[0]);
      const quickBtn = document.getElementById('breathing-quick');
      if (quickBtn) {
        quickBtn.addEventListener('click', () => {
          isQuickMode = true;
          totalDuration = Number.POSITIVE_INFINITY;
          startBreathing();
        });
      }
      // Allow tapping a duration to start as well if desired
      durationBtns.forEach((btn) => {
        btn.addEventListener('dblclick', () => {
          const mins = parseInt(btn.dataset.duration || '1', 10);
          selectedDuration = Math.max(1, mins);
          highlight(btn);
          isQuickMode = false;
          totalDuration = selectedDuration * 60000;
          startBreathing();
        });
      });
    };

    const renderActiveControls = () => {
      const controls = document.getElementById('breath-controls');
      if (!controls) return;
      controls.innerHTML = `
        <span id="breathing-duration-display" style="font-size:14px;font-weight:700;color:#3a3a3c;">${isQuickMode ? 'On-going' : `${Math.round(totalDuration / 1000)}s remaining`}</span>
        <button id="breathing-stop" style="background:#e4002b;color:#fff;border:1px solid #e4002b;border-radius:999px;padding:10px 14px;font-size:13px;font-weight:700;cursor:pointer;">Stop</button>
      `;
      const stop = document.getElementById('breathing-stop');
      if (stop) stop.addEventListener('click', resetBreathing);
    };

    const startBreathing = () => {
      let phaseIndex = 0;
      setBubbleScale(0.9, 0);
      const sessionStart = performance.now();
      const sessionEnd = isQuickMode ? Number.POSITIVE_INFINITY : sessionStart + totalDuration;
      renderActiveControls();
      const runPhase = () => {
        const elapsed = performance.now() - sessionStart;
        if (!isQuickMode && elapsed >= totalDuration) {
          clearTimeout(breathTimeout);
          clearInterval(breathSessionInterval);
          if (breathLabel) breathLabel.textContent = 'Done';
          if (breathCounter) breathCounter.textContent = '';
          setBubbleScale(0.9, 300);
          return;
        }
        const phase = breathPhases[phaseIndex % breathPhases.length];
        setBubbleScale(phase.scale, phase.transition);
        if (breathLabel) breathLabel.textContent = phase.label;
        const seconds = phase.duration / 1000;
        let remaining = seconds;
        if (breathStatus) breathStatus.textContent = `${phase.label} (${seconds}s)`;
        if (breathCounter) breathCounter.textContent = remaining.toString();

        const tick = () => {
          remaining -= 1;
          if (remaining > 0) {
            if (breathCounter) breathCounter.textContent = remaining.toString();
            setTimeout(tick, 1000);
          }
        };
        setTimeout(tick, 1000);

        breathTimeout = setTimeout(() => {
          phaseIndex += 1;
          runPhase();
        }, phase.duration);
      };
      clearTimeout(breathTimeout);
      clearInterval(breathSessionInterval);
      const disp = document.getElementById('breathing-duration-display');
      const display = () => {
        if (isQuickMode) {
          if (disp) disp.textContent = 'On-going';
          return;
        }
        const remainingMs = sessionEnd - performance.now();
        const remainingSec = Math.max(0, Math.ceil(remainingMs / 1000));
        if (disp) {
          const mins = Math.floor(remainingSec / 60);
          const secs = remainingSec % 60;
          disp.textContent = mins > 0 ? `${mins}:${secs.toString().padStart(2, '0')} remaining` : `${secs}s remaining`;
        }
      };
      display();
      breathSessionInterval = setInterval(display, 1000);
      const stopBtn = document.getElementById('breathing-stop');
      if (stopBtn) stopBtn.style.display = 'inline-flex';
      const controls = document.getElementById('breath-controls');
      if (controls) controls.classList.add('breathing-active');
      runPhase();
    };

    const resetBreathing = () => {
      clearTimeout(breathTimeout);
      clearInterval(breathSessionInterval);
      setBubbleScale(0.9, 300);
      if (breathLabel) breathLabel.textContent = 'Tap start';
      if (breathCounter) breathCounter.textContent = '4';
      isQuickMode = false;
      renderRestControls();
    };

    renderRestControls();

    // Handle join overlay dismissal with animation
    document.querySelectorAll('.join-overlay-btn').forEach((btn) => {
      btn.addEventListener('click', (e) => {
        e.preventDefault();
        const overlay = btn.closest('.join-overlay');
        if (overlay) {
          overlay.style.transition = 'transform 0.45s ease, opacity 0.45s ease, filter 0.45s ease';
          overlay.style.transform = 'translateY(30px) scale(0.96)';
          overlay.style.opacity = '0';
          overlay.style.filter = 'blur(2px)';
          setTimeout(() => {
            overlay.remove();
          }, 450);
        }
      });
    });
  </script>

  <script src="https://kit.fontawesome.com/2c7f1c6cae.js" crossorigin="anonymous"></script>
</body>
</html>
